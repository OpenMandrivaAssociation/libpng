diff -urw libpng-1.6.14/png.c libpng-1.6.15/png.c
--- libpng-1.6.14/png.c	2014-10-23 01:28:04.000000000 +0100
+++ libpng-1.6.15/png.c	2014-11-20 15:33:24.000000000 +0000
@@ -165,32 +165,31 @@
 int
 png_user_version_check(png_structrp png_ptr, png_const_charp user_png_ver)
 {
+     /* Libpng versions 1.0.0 and later are binary compatible if the version
+      * string matches through the second '.'; we must recompile any
+      * applications that use any older library version.
+      */
+
    if (user_png_ver)
    {
-      int i = 0;
+      int i = -1;
+      int found_dots = 0;
 
       do
       {
-         if (user_png_ver[i] != png_libpng_ver[i])
+         i++;
+         if (user_png_ver[i] != PNG_LIBPNG_VER_STRING[i])
             png_ptr->flags |= PNG_FLAG_LIBRARY_MISMATCH;
-      } while (png_libpng_ver[i++]);
+         if (user_png_ver[i] == '.')
+            found_dots++;
+      } while (found_dots < 2 && user_png_ver[i] != 0 &&
+            PNG_LIBPNG_VER_STRING[i] != 0);
    }
 
    else
       png_ptr->flags |= PNG_FLAG_LIBRARY_MISMATCH;
 
-   if (png_ptr->flags & PNG_FLAG_LIBRARY_MISMATCH)
-   {
-     /* Libpng 0.90 and later are binary incompatible with libpng 0.89, so
-      * we must recompile any applications that use any older library version.
-      * For versions after libpng 1.0, we will be compatible, so we need
-      * only check the first and third digits (note that when we reach version
-      * 1.10 we will need to check the fourth symbol, namely user_png_ver[3]).
-      */
-      if (user_png_ver == NULL || user_png_ver[0] != png_libpng_ver[0] ||
-          (user_png_ver[0] == '1' && (user_png_ver[2] != png_libpng_ver[2] ||
-          user_png_ver[3] != png_libpng_ver[3])) ||
-          (user_png_ver[0] == '0' && user_png_ver[2] < '9'))
+   if ((png_ptr->flags & PNG_FLAG_LIBRARY_MISMATCH) != 0)
       {
 #ifdef PNG_WARNINGS_SUPPORTED
          size_t pos = 0;
@@ -200,7 +199,7 @@
              "Application built with libpng-");
          pos = png_safecat(m, (sizeof m), pos, user_png_ver);
          pos = png_safecat(m, (sizeof m), pos, " but running with ");
-         pos = png_safecat(m, (sizeof m), pos, png_libpng_ver);
+      pos = png_safecat(m, (sizeof m), pos, PNG_LIBPNG_VER_STRING);
          PNG_UNUSED(pos)
 
          png_warning(png_ptr, m);
@@ -212,7 +211,6 @@
 
          return 0;
       }
-   }
 
    /* Success return. */
    return 1;
